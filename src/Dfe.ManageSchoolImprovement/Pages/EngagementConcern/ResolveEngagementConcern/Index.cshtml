@page "/engagement-concern/resolve-engagement-concern/{id:int}"

@model Dfe.ManageSchoolImprovement.Frontend.Pages.EngagementConcern.ResolveEngagementConcern.IndexModel

@{
    ViewData["Title"] = "Mark engagement concern as resolved";
}

@section BeforeMain
{
    <a asp-page="@Links.EngagementConcern.Index.Page" asp-route-id="@Model.SupportProject.Id" class="govuk-back-link">Back</a>
}

@if (Model.ShowError)
{
    <partial name="_ErrorSummary" />
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <span class="govuk-caption-l">@Model.SupportProject.SchoolName</span>
        <form method="post">
            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                        <h1 class="govuk-fieldset__heading">
                            Mark engagement concern as resolved
                        </h1>
                    </legend>
                    <div class="govuk-checkboxes" data-module="govuk-checkboxes">
                        <div class="govuk-checkboxes__item">
                            <input name="mark-concern-resolved-hidden" type="hidden" value="false" />
                            <input class="govuk-checkboxes__input"
                                   id="mark-concern-resolved"
                                   name="mark-concern-resolved"
                                   value="true"
                                   type="checkbox"
                            @(Model.MarkConcernResolved == true ? "checked" : "")
                                   data-aria-controls="conditional-mark-concern-resolved"/>
                            <label class="govuk-label govuk-checkboxes__label" for="mark-concern-resolved">
                                Mark engagement concern with this school as resolved
                            </label>
                        </div>
                        <div class="govuk-checkboxes__conditional govuk-checkboxes__conditional--hidden" id="conditional-mark-concern-resolved">
                            <div class="govuk-form-group @(Model.ShowResolutionDetailsError ? "govuk-form-group--error" : "")">
                                <label class="govuk-label" for="resolution-details">
                                    Enter details about how this concern was resolved.
                                </label>
                                @if (Model.ShowResolutionDetailsError)
                                {
                                    <p id="resolution-details-error" class="govuk-error-message">
                                        <span class="govuk-visually-hidden">Error:</span> You must enter details
                                    </p>
                                }
                                <textarea class="govuk-textarea @(Model.ShowResolutionDetailsError ? "govuk-textarea--error" : "")" id="resolution-details" name="resolution-details" rows="5">@Model.ResolutionDetails</textarea>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>

            <div class="govuk-button-group govuk-body">
                <button type="submit" draggable="false" class="govuk-button govuk-button" data-module="govuk-button">
                    Confirm and continue
                </button>
                <a asp-page="@Links.EngagementConcern.Index.Page" asp-route-id="@Model.SupportProject.Id" class="govuk-link">Cancel</a>
            </div>
        </form>
    </div>
</div>
