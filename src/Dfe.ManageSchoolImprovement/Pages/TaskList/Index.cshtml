@page "/task-list/{id:int}"
@using Dfe.ManageSchoolImprovement.Frontend.Models
@using Dfe.ManageSchoolImprovement.Frontend.TagHelpers
@model Dfe.ManageSchoolImprovement.Frontend.Pages.TaskList.IndexModel
@{
    Model.SetErrorPage(Links.SchoolList.Index.Page);
    ViewData["Title"] = "Task List";
    TempData["AssignmentReferrer"] = @Links.TaskList.Index.Page;
}

@section BeforeMain
{
    <a asp-page="@Model.ReturnPage" class="govuk-back-link">@Links.SchoolList.Index.BackText</a>
}


<partial name="_ErrorSummary" />


<partial name="_ProjectHeader" model="Model.SupportProject" />

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <h2 class="govuk-heading-l govuk-!-margin-bottom-2" data-test="prepare-project-doc">Task list</h2>
        <h3 class="app-task-list__section govuk-!-margin-top-8">Before you start</h3>
        <div class="app-task-list">
            <ul class="app-task-list__items govuk-!-padding-left-0">
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        @if (Model.SupportProject.HasReceivedFundingInThelastTwoYears ?? false)
                        {
                            <a class="govuk-link" asp-page="@Links.TaskList.FundingHistoryDetails.Page" asp-route-id="@Model.SupportProject.Id" data-cy="funding_history">
                                Enter the funding history
                            </a>
                        }
                        else
                        {
                            <a class="govuk-link" asp-page="@Links.TaskList.FundingHistory.Page" asp-route-id="@Model.SupportProject.Id" data-cy="funding_history">
                                Enter the funding history
                            </a>
                        }
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.FundingHistoryStatus" />
                </li>
            </ul>
        </div>
        <h3 class="app-task-list__section govuk-!-margin-top-8">Begin the project</h3>
        <div class="app-task-list">
            <ul class="app-task-list__items govuk-!-padding-left-0">
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.ContactTheSchool.Page" asp-route-id="@Model.SupportProject.Id" data-cy="confirm_project_dates">
                            Contact the school
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.ContactTheSchoolTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.RecordTheSchoolResponse.Page" asp-route-id="@Model.SupportProject.Id" data-cy="record-school-response">
                            Record the school's response
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.RecordTheSchoolResponseTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.CheckPotentialAdviserConflictsOfInterest.Page" asp-route-id="@Model.SupportProject.Id" data-cy="CheckPotentialAdviserConflictsOfInterest">
                            Check potential adviser conflicts of interest
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.CheckThePotentialAdviserConflictsOfInterestTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.AllocateAdviser.Page" asp-route-id="@Model.SupportProject.Id" data-cy="AllocateAdviser">
                            Allocate an adviser
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.AllocateAdviserTaskListStatus" />
                </li>
            </ul>
        </div>
        <h3 class="app-task-list__section govuk-!-margin-top-8">Establish support needs</h3>
        <div class="app-task-list">
            <ul class="app-task-list__items govuk-!-padding-left-0">
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.SendIntroductoryEmail.Page" asp-route-id="@Model.SupportProject.Id" data-cy="send-introductory-email-request-improvement-plan">
                            Send introductory email
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.SendIntroductoryEmailTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.ArrangeAdviserVisitToSchool.Page" asp-route-id="@Model.SupportProject.Id" data-cy="adviser-school-visit">
                            Arrange adviser visit to school
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.AdviserVisitToSchoolTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.RecordVisitDateToVisitSchool.Page" asp-route-id="@Model.SupportProject.Id" data-cy="record-school-visit-date">
                            Record date of visit to school
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.RecordVisitDateToVisitSchoolTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-note-of-visit">
                        <a class="govuk-link" asp-page="@Links.TaskList.NoteOfVisit.Page" asp-route-id="@Model.SupportProject.Id" data-cy="note-of-visit">
                            Write and save the Note of Visit
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.NoteOfVisitTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.CompleteAndSaveAssessmentTemplate.Page" asp-route-id="@Model.SupportProject.Id" data-cy="complate-save-assessment-template">
                            Complete and save the assessment template
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.CompleteAndSaveAssessmentTemplateTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.RecordMatchingDecision.Page" asp-route-id="@Model.SupportProject.Id" data-cy="record-support-decision">
                            Record matching decision
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.RecordSupportDecisionTaskListStatus" />
                </li>
            </ul>
        </div>
        <h3 class="app-task-list__section govuk-!-margin-top-8">Find possible supporting organisation</h3>
        <div class="app-task-list">
            <ul class="app-task-list__items govuk-!-padding-left-0">
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.ChoosePreferredSupportingOrganisation.Page" asp-route-id="@Model.SupportProject.Id" data-cy="choose-preferred-supporting-organisation">
                            Choose preferred supporting organisation
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.ChosePreferredSupportingOrganisationTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.DueDiligenceOnPreferredSupportingOrganisation.Page" asp-route-id="@Model.SupportProject.Id" data-cy="due-diligence-on-preferred-supporting-organisation">
                            Carry out due diligence on preferred supporting organisation
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.DueDiligenceOnPreferredSupportingOrganisationTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.RecordSupportingOrganisationAppointment.Page" asp-route-id="@Model.SupportProject.Id" data-cy="record-supporting-organisation-appointment">
                            Record supporting organisation appointment
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.SetRecordSupportingOrganisationAppointment" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.AddSupportingOrganisationContactDetails.Page" asp-route-id="@Model.SupportProject.Id" data-cy="add-supporting-organisation-contact-details">
                            Add supporting organisation contact details
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.SupportingOrganisationContactDetailsTaskListStatus" />
                </li>
            </ul>
        </div>
        <h3 class="app-task-list__section govuk-!-margin-top-8">Send planning grant offer letter</h3>
        <div class="app-task-list">
            <ul class="app-task-list__items govuk-!-padding-left-0">
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.RequestPlanningGrantOfferLetter.Page" asp-route-id="@Model.SupportProject.Id" data-cy="request-planning-grant-offer-letter">
                            Request planning grant offer letter
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.RequestPlanningGrantOfferLetterTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.ConfirmPlanningGrantOfferLetter.Page" asp-route-id="@Model.SupportProject.Id" data-cy="request-planning-grant-offer-letter">
                            Confirm planning grant offer letter sent
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.ConfirmPlanningGrantOfferLetterTaskListStatus" />
                </li>
            </ul>
        </div>
        <h3 class="app-task-list__section govuk-!-margin-top-8">Create the improvement plan</h3>
        <div class="app-task-list">
            <ul class="app-task-list__items govuk-!-padding-left-0">
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.ShareTheImprovementPlanTemplate.Page" asp-route-id="@Model.SupportProject.Id" data-cy="share-the-improvement-plan-templatesation">
                            Share the improvement plan template
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.ShareTheImprovementPlanTemplateTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.ReviewTheImprovementPlan.Page" asp-route-id="@Model.SupportProject.Id" data-cy="review-the-improvement-plan">
                            Review the improvement plan
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.ReviewTheImprovementPlanTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.SendAgreedImprovementPlanForApproval.Page" asp-route-id="@Model.SupportProject.Id" data-cy="send-agreed-improvement-plan">
                            Send the agreed improvement plan for approval
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.SendAgreedImprovementPlanForApprovalTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.RecordImprovementPlanDecision.Page" asp-route-id="@Model.SupportProject.Id" data-cy="record-improvement-plan-decision">
                            Record improvement plan decision
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.RecordImprovementPlanDecisionTaskListStatus" />
                </li>
            </ul>
        </div>
        <h3 class="app-task-list__section govuk-!-margin-top-8">Send improvement grant offer letter</h3>
        <div class="app-task-list">
            <ul class="app-task-list__items govuk-!-padding-left-0">
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.RequestImprovementGrantOfferLetter.Page" asp-route-id="@Model.SupportProject.Id" data-cy="request-improvement-grant-offer-letter">
                            Request improvement grant offer letter
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.RequestImprovementGrantOfferLetterTaskListStatus" />
                </li>
                <li class="app-task-list__item">
                    <span class="app-task-list__task-name" data-cy="task-name">
                        <a class="govuk-link" asp-page="@Links.TaskList.ConfirmImprovementGrantOfferLetterSent.Page" asp-route-id="@Model.SupportProject.Id" data-cy="confirm-improvement-grant-offer-letter">
                            Confirm improvement grant offer letter
                        </a>
                    </span>
                    <partial name="Shared/_TaskListStatus" model="@Model.ConfirmImprovementGrantOfferLetterTaskListStatus" />
                </li>
            </ul>
        </div>
    </div>
</div>
